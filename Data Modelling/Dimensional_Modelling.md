# Dimensional Modelling (DM)

- Follows this video: https://youtu.be/lWPiSZf7-uQ?si=YjkdjXiXw7RG0Yc_

- Database
    - Mainly used for handling day-to-day operations
    - Needs to comply with ACID
    - Optimised for quick read and writes
    - Not recommended to use for analysis (aggregation, complex queries) because it will compete for resources causing slow down in other important operations

- Data warehouse
    - A data warehouse on the other hand is used for reporting and analytics
    - Provides a way to unify data sources - sales, customer service, inventory etc
    - Insert and Update operation speeds are not a priority

- Overview of Dimensional Modelling
    - "Dimensional Modelling is a design technique for databases intended to support end-user queries in a data warehouse" - Ralph Kimball  
    - Some of the features of DM
        - Data can be **denormalised** if needed to support reporting
        - Descriptive data (cols that use in GROUP BY) is separated from quantitative data (cols that you use in aggregation)

- Dimension VS Fact
- Dimension: 
    - Describes a particular event. 
    - It is what you group on
    - It can be text, numeric or boolean etc 
    - Example: Product name, product category..
- Fact:
    - Also called a measure - measurable metric
    - Actual event that happened
    - Example: sales amount, clicks, sessions...

## STAR Schema
- It is one of the ways of modelling data in a **data warehouse** such that it provides efficient querying for OLAP systems
- The main idea is that one fact table is connected to other dimensional tables forming a star shape.

### Characteristics
- Fact Table: Contains the core business metrics (facts), such as sales, revenue, or quantity.
- Dimension Tables: Store descriptive attributes related to the facts (e.g., time, product, customer).
- Denormalized Dimensions: The dimension tables are often denormalized, meaning they store all attributes in a flat structure, which can speed up query performance.
- Dimension Keys are usually NOT keys from source systems rather they are generated by the data warehouse (surrogate keys). 
    - Source systems can change their keys (unlikely but can happen)
    - If you have data from multiple sources then you would need to create your own keys to ensure uniqueness 
### Example
- For an e-commerce system, a traditional Relational model (optimised for OLTP) would have multiple tables like
- `products: product_id, product_name, category_id, subcategory_id`
- `Categories: category_id, category_name,subcategory_id`
- However, in the case of STAR schema, there would be a single dimensional table
`dim_products: product_id, product_name, category_name, subcategory_name, brand_name, unit_price....`
- The trade-off is that this denormalization creates data redundancy (department_name might be repeated many times) and makes updates more complex, but in a data warehouse, this is acceptable since:
    - Data is primarily read-only
    - Updates happen in batch processes
    - Query performance is more important than storage efficiency (Storage is cheaper than compute) 


## Snowflake Schema
- Another technique of data warehouse modelling is Snowflake schema which essentially builds on the Star schema
- The difference is that the dimensional table branch out into further dimensional tables

## Steps of DM
### 1. Choose the Business Process
- Choose a single process like Sales
- Multiple processes can cause complexities
### 2. Declare the grain
- Lowest level of detail
### 3. Identify the dimensions
### 4. Identify the facts